scrape_website:
  description: >
    Use the Playwright Style Extractor tool to scrape the event website at {url}.

    CRITICAL: You MUST use the Playwright Style Extractor tool. DO NOT generate,
    guess, or imagine website content. ONLY use the tool's actual output.

    Call the tool with the URL to extract:
    - Raw HTML structure from the rendered page
    - Computed styles for all key elements (header, nav, body, h1, button, a)
    - CSS custom properties (--variable-name)
    - Logo and favicon URLs
    - All data comes from actual browser rendering, not assumptions

    The tool returns a dictionary with:
    - html: Full HTML content from the page
    - computed_styles: Object with computed styles for each selector
    - css_variables: Object with CSS custom properties
    - assets: Logo and favicon URLs
    - success: true if scraping succeeded

    DO NOT fabricate HTML, CSS, or colors. Return ONLY the tool's actual output.
  expected_output: >
    The complete JSON output from the Playwright Style Extractor tool, containing:
    - html: Actual HTML content from the browser
    - computed_styles: Actual computed styles for key selectors
    - css_variables: Actual CSS custom properties from :root
    - assets: Logo and favicon URLs if present
    - success: true

    This output must be real data from the tool, not generated content.
  agent: web_scraper_agent

extract_styles:
  description: >
    Analyze the scraped HTML and CSS from the previous task to extract:

    Color Palette:
    - Primary brand color (most prominent, usually in headers/CTA buttons)
    - Secondary color (supporting color, often in subheadings)
    - Accent color (highlights, links, interactive elements)
    - Background color (page background, typically white or off-white)
    - Text color (body text, typically dark gray or black)

    Typography:
    - Heading font family (h1, h2, h3 elements)
    - Body font family (p, div, main text)
    - Heading size (base h1 size)
    - Body size (base paragraph size)
    - Line height (text readability setting)

    Layout:
    - Grid system (flexbox, CSS Grid, or column-based)
    - Spacing unit (base unit for margins/padding, usually 4px or 8px)
    - Border radius (roundness of elements)
    - Container max-width

    Use CSS specificity and frequency analysis to identify the most important values.
    Ignore inline styles that appear to be overrides or exceptions.
  expected_output: >
    A structured style analysis containing:
    1. ColorPalette with 5 colors (hex or rgb format)
    2. Typography settings with font families and sizes
    3. LayoutConfig with grid system and spacing
    4. Logo URL and favicon URL
    5. Confidence scores for each extracted value (0-100%)
  agent: style_analyst_agent
  context:
    - scrape_website

analyze_voice:
  description: >
    Analyze the website content from the scraping task to identify brand voice and tone:

    Tone Analysis:
    - Overall tone: professional, casual, energetic, sophisticated, friendly, technical
    - Can be multiple tones (e.g., "professional, energetic")

    Keywords:
    - Extract 5-10 key brand keywords that appear frequently
    - Focus on action words, industry terms, and brand-specific vocabulary

    Style:
    - Writing style: formal, conversational, technical, storytelling

    Personality:
    - Brand personality descriptor: innovative, traditional, bold, caring, authoritative

    Analyze:
    - Headlines and hero section copy
    - Call-to-action button text
    - Navigation and menu labels
    - Body content and descriptions
    - Microcopy and error messages (if present)

    Look for patterns in:
    - Sentence structure (short vs. long, simple vs. complex)
    - Word choice (technical jargon vs. plain language)
    - Use of first-person vs. third-person
    - Active vs. passive voice
    - Emotional language vs. factual statements
  expected_output: >
    A brand voice analysis containing:
    1. Tone (comma-separated string of tone descriptors)
    2. Keywords (list of 5-10 brand keywords)
    3. Style (writing style descriptor)
    4. Personality (optional personality descriptor)
    5. Confidence score (0-100%)
    6. Supporting evidence (quotes from the website)
  agent: voice_analyst_agent
  context:
    - scrape_website

compile_config:
  description: >
    Compile the style extraction and voice analysis into a complete EventStyleConfig
    JSON object that matches the Pydantic schema.

    Required fields:
    - event_id: Generate from the URL (e.g., "example-com" from "example.com")
    - event_name: Extract from page title or h1, or derive from domain
    - source_url: The original URL that was scraped
    - colors: ColorPalette object from style extraction
    - typography: Typography object from style extraction
    - brand_voice: BrandVoice object from voice analysis
    - layout: LayoutConfig object from style extraction (optional, has defaults)
    - logo_url: Logo URL from scraping (optional)
    - favicon_url: Favicon URL from scraping (optional)
    - scraped_at: Current ISO 8601 timestamp

    Validation requirements:
    - All color values must be valid CSS colors (hex, rgb, or hsl)
    - Font families should be complete with fallbacks (e.g., "Inter, sans-serif")
    - All required fields must be present
    - No extra fields beyond the schema

    If any required data is missing, use sensible defaults:
    - Colors: Use web-safe defaults (e.g., #000000 for text)
    - Fonts: Use system font stacks
    - Tone: Default to "professional"
  expected_output: >
    A complete, valid EventStyleConfig JSON object ready for export.
    The JSON must pass Pydantic validation without errors.
  agent: compiler_agent
  context:
    - scrape_website
    - extract_styles
    - analyze_voice
